<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mini App</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input, button { margin: 5px 0; padding: 5px; font-size: 16px; width: 100%; }
    #report { margin-top: 20px; white-space: pre-wrap; background: #f0f0f0; padding: 10px; border-radius: 8px; }
  </style>
</head>
<body>
  <h2>–†–∞—Å—á—ë—Ç –æ–ø–ª–∞—Ç—ã –∑–∞–ª–∞ üèê</h2>

  <label>–°—É–º–º–∞ –∑–∞ 1 —á–∞—Å:</label>
  <input type="number" id="hallPrice" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä 1500">

  <label>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤:</label>
  <input type="number" id="hours" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä 5">

  <label>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤:</label>
  <input type="number" id="totalPlayers" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä 20">

  <button onclick="generateReport()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç</button>

  <div id="report"></div>

  <script>
    function roundToTen(n) { return Math.ceil(n/10)*10; }

    function generateReport() {
      const hallPrice = Number(document.getElementById('hallPrice').value);
      const hours = Number(document.getElementById('hours').value);
      const totalPlayers = Number(document.getElementById('totalPlayers').value);

      if (!hallPrice || !hours || !totalPlayers) { alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!'); return; }

      let text = `üèê –†–∞—Å—á—ë—Ç –æ–ø–ª–∞—Ç—ã –∑–∞–ª–∞ üèê\n`;
      text += `–°—É–º–º–∞ –∑–∞ 1 —á–∞—Å: ${hallPrice}‚ÇΩ\n`;
      text += `–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤: ${hours}\n`;
      text += `–í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤: ${totalPlayers}\n\n`;

      for (let h=1; h<=hours; h++) {
        const sum = roundToTen(hallPrice / totalPlayers * h);
        text += `‚è± ${h} —á–∞—Å(–∞) ‚Äî ${sum}‚ÇΩ\n`;
      }

      text += `\nüí∑ –•–≤–æ—Å—Ç–∏–∫–∏ –∏ –±–æ–Ω—É—Å—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!\n–°–ø–∞—Å–∏–±–æ –≤—Å–µ–º!`;

      document.getElementById('report').innerText = text;

      if (window.Telegram.WebApp) {
        Telegram.WebApp.sendData(JSON.stringify({hallPrice, hours, totalPlayers}));
      }
    }
  </script>
</body>
</html>